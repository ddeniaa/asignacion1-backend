(this["webpackJsonpecommerce-app"]=this["webpackJsonpecommerce-app"]||[]).push([[0],{69:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c(29),s=c.n(n),r=c(17),i=c(5),o=c.n(i),l=c(9),j=c(7),u=c(8),d=c(19);c(50),c(70);d.a.initializeApp({apiKey:"AIzaSyAgf3Czyypj9-DK0jigESfqQ-dhcREUv8Y",authDomain:"ecommerce-app-bdd67.firebaseapp.com",projectId:"ecommerce-app-bdd67",storageBucket:"ecommerce-app-bdd67.appspot.com",messagingSenderId:"250345770288",appId:"1:250345770288:web:0b79c7ae68d940cf8cccf5"});var b=d.a.firestore(),m=new d.a.auth.GoogleAuthProvider,h=new d.a.auth.FacebookAuthProvider,p="[Auth] Login",O="[Auth] Logout",f="[Add] AddComment",x=function(e,t){return{type:p,payload:{uid:e,displayName:t}}},v=function(){return{type:O}},g=function(e,t){return{type:f,payload:Object(u.a)({id:e},t)}},N=c(1),C=function(){var e=Object(r.b)();return Object(N.jsxs)("div",{className:"box-container",children:[Object(N.jsx)("h2",{className:"login-tittle",children:"Login"}),Object(N.jsx)("form",{className:"animate__animated animate__fadeIn animate__faster",children:Object(N.jsxs)("div",{className:"auth__social-networks",children:[Object(N.jsx)("p",{children:"Login with social networks"}),Object(N.jsxs)("div",{className:"google-btn",onClick:function(){e((function(e){d.a.auth().signInWithPopup(m).then((function(t){var c=t.user;e(x(c.uid,c.displayName))}))}))},children:[Object(N.jsx)("div",{className:"google-icon-wrapper",children:Object(N.jsx)("i",{className:"fab fa-google"})}),Object(N.jsx)("p",{className:"btn-text",children:Object(N.jsx)("b",{children:"Sign in with Google"})})]}),Object(N.jsxs)("div",{className:"facebook-btn",onClick:function(){e((function(e){d.a.auth().signInWithPopup(h).then((function(t){var c=t.user;e(x(c.uid,c.displayName))}))}))},children:[Object(N.jsx)("div",{className:"facebook-icon-wrapper",children:Object(N.jsx)("i",{className:"fab fa-facebook-square"})}),Object(N.jsx)("p",{className:"btn-text",children:Object(N.jsx)("b",{children:"Sign in with Facebook"})})]})]})})]})},k=c(12),w=c(4),y=c(23),_=c.n(y),S=function(e){var t=e.id,c=e.titulo,a=e.img,n=e.autor,s=e.descripCorta,r=e.calificacion;return Object(N.jsx)("div",{className:"card-deck",id:t,children:Object(N.jsxs)("div",{className:"card",style:{maxWidth:210},children:[Object(N.jsx)(k.b,{to:"/book/".concat(t),children:Object(N.jsx)("img",{src:a,className:"card-img",alt:"img"})}),Object(N.jsxs)("div",{className:"card-body",children:[Object(N.jsxs)("h1",{className:"card-title",children:[" ",c," "]}),Object(N.jsxs)("p",{className:"autor",children:[" Autor: ",n," "]}),Object(N.jsxs)("p",{className:"decripcion",children:[" ",s," "]})]}),Object(N.jsx)("div",{className:"card-footer",children:Object(N.jsx)(_.a,{count:r,onChange:function(e){console.log(e)},size:19,color:"#7B113A",edit:!1})})]})})},E=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),c=t[0],n=t[1];Object(a.useEffect)((function(){s()}),[]);var s=function(){var e=Object(l.a)(o.a.mark((function e(){var t,c,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://commerce-app.herokuapp.com/api/libros/listalibros",e.next=3,fetch("https://commerce-app.herokuapp.com/api/libros/listalibros");case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,a=c.data,s=a.map((function(e){return{id:e.id,titulo:e.titulo,img:e.img,autor:e.autor,descripCorta:e.descripCorta,descripLarga:e.descripLarga,palabrasClaves:e.palabrasClaves,categoria:e.categoria,calificacion:e.calificacion}})),n(s);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("h1",{children:"Cat\xe1logo"}),Object(N.jsx)("hr",{}),Object(N.jsx)("div",{className:"card-columns animate__animated animate__zoomIn",children:c.map((function(e){return Object(N.jsx)(S,Object(u.a)({},e),e.id)}))})]})},A=c(30),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),c=Object(j.a)(t,2),n=c[0],s=c[1],r=function(){s(e)},i=function(e){var t=e.target;s(Object(u.a)(Object(u.a)({},n),{},Object(A.a)({},t.name,t.value)))};return[n,i,r]},I=c(25),B=c.n(I),D=function(){var e=function(e){console.log(e)},t=Object(w.h)().id,c=Object(r.c)((function(e){return e.comments})),n=Object(r.c)((function(e){return e.auth})).name,s=L(c),i=Object(j.a)(s,3),m=i[0],h=i[1],p=i[2],O=m.decripComentario,f=m.calificacionUsuario,v=Object(a.useState)([]),C=Object(j.a)(v,2),k=C[0],y=C[1],S=function(){var e=Object(l.a)(o.a.mark((function e(){var c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.collection("comments").where("id","==","".concat(t)).get();case 2:c=e.sent,a=[],c.forEach((function(e){a.push(Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id}))})),console.log(a),y(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){S()}),[]);var E=Object(r.b)(),A=Object(a.useState)(!0),I=Object(j.a)(A,2),D=I[0],z=I[1],F=Object(a.useState)(!1),U=Object(j.a)(F,2),P=U[0],q=U[1];if(Object(a.useEffect)((function(){d.a.auth().onAuthStateChanged(function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===t||void 0===t?void 0:t.uid)?(E(x(t.uid,t.displayName)),q(!0)):q(!1),z(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[E,z,q]),D)return Object(N.jsx)("div",{className:"text-center",children:Object(N.jsx)("div",{className:"spinner-border  m-5",role:"status",children:Object(N.jsx)("span",{className:"sr-only",children:"Loading..."})})});var T={decripComentario:"",calificacionUsuario:""};return f>5&&B.a.fire({icon:"info",title:"La puntuaci\xf3n debe estar dentro del rango de 1 a 5",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}}),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("hr",{}),Object(N.jsxs)("div",{className:"card border-success mb-3",children:[Object(N.jsxs)("div",{className:"card-header bg-transparent border-success",children:[" ",Object(N.jsx)("h5",{children:"Dejar un comentario:"})]}),Object(N.jsx)("div",{children:Object(N.jsxs)("h5",{className:"card-title",children:["Descripci\xf3n:",Object(N.jsx)("input",{name:"decripComentario",placeholder:"Dejanos tu opini\xf3n...",onChange:h,autoComplete:"off",type:"text",className:"comentario",value:O})]})}),Object(N.jsx)("div",{children:Object(N.jsxs)("h5",{className:"card-title",children:["Calificaci\xf3n:",Object(N.jsx)("input",{name:"calificacionUsuario",autoComplete:"off",onChange:h,type:"text",className:"comentario",value:f,placeholder:"La puntuaci\xf3n debe ser entre 1-5"})]})}),Object(N.jsx)("div",{className:"card-footer bg-transparent border-success",children:Object(N.jsx)("button",{type:"button",className:"btn btn-fefault",onClick:function(e){P?k.find((function(e){return e.name===n}))?(B.a.fire({position:"center",icon:"success",title:"Comentario Guardado",showConfirmButton:!1,timer:1500}),p(T)):(e.preventDefault(),E(function(e,t,c){var a=e.decripComentario,n=e.calificacionUsuario;return function(){var e=Object(l.a)(o.a.mark((function e(s){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={decripComentario:a,name:t,id:c,calificacionUsuario:n},e.next=3,b.collection("comments").add(r);case 3:i=e.sent,s(g(i.id,r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(m,n,t)).then((function(e){B.a.fire({position:"center",icon:"success",title:"Comentario Guardado",showConfirmButton:!1,timer:1500}),p(T)}))):(B.a.fire({icon:"error",title:"Oops...",text:"Debes autenticarte para agregar un comentario."}),window.location="/login")},children:"Comentar"})})]}),Object(N.jsx)("hr",{}),Object(N.jsxs)("div",{children:[Object(N.jsx)("h5",{children:"Sala de comentarios:"}),Object(N.jsx)("hr",{}),k.map((function(t){return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("ul",{className:"list-group-item list-group-item-success",children:[Object(N.jsx)("div",{className:"card-header",children:t.name}),Object(N.jsxs)("div",{className:"card-body-co",children:[Object(N.jsx)("p",{className:"card-text",children:Object(N.jsx)(_.a,{count:t.calificacionUsuario,onChange:e,size:20,color:"#7B113A",edit:!1})}),Object(N.jsx)("p",{className:"card-text",children:t.decripComentario})]})]})})}))]})]})},z=function(e){var t=e.history,c=Object(w.h)().id,n=Object(a.useState)([]),s=Object(j.a)(n,2),r=s[0],i=s[1];Object(a.useEffect)((function(){u(c)}),[c]);var u=function(){var e=Object(l.a)(o.a.mark((function e(t){var c,a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="https://commerce-app.herokuapp.com/api/libros/listalibros/libro/".concat(t),e.next=3,fetch(c);case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,s=n.data,i(s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=r.titulo,b=r.img,m=r.autor,h=r.descripCorta,p=r.descripLarga,O=r.palabrasClaves,f=r.categoria,x=r.calificacion;return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("div",{children:[Object(N.jsx)("button",{className:"btn m-1 btn-block btn-outline-ligth",onClick:function(){t.length<=2?t.push("/"):t.goBack()},children:Object(N.jsx)("i",{className:"fas fa-chevron-circle-left"})}),Object(N.jsx)("div",{className:"card mb-3",style:{maxwidth:520,maxheight:300},children:Object(N.jsxs)("div",{className:"row g-0",children:[Object(N.jsx)("div",{className:"col-md-4",children:Object(N.jsx)("img",{className:"img-unlibro",src:b,alt:"img"})}),Object(N.jsx)("div",{className:"col-md-8",children:Object(N.jsxs)("div",{className:"card-title-libro",children:[Object(N.jsxs)("h1",{className:"card-text-unlibro",children:[" ",d]}),Object(N.jsx)("hr",{}),Object(N.jsx)("div",{className:"card-text",children:Object(N.jsxs)("h5",{children:["Autor: ",m]})}),Object(N.jsx)("div",{className:"card-text",children:Object(N.jsxs)("h5",{children:[" Calificaci\xf3n:",Object(N.jsx)(_.a,{count:x,onChange:function(e){console.log(e)},size:19,color:"#7B113A",edit:!1})]})}),Object(N.jsxs)("div",{children:[Object(N.jsxs)("h6",{children:["Sinopsis: ",h," "]}),Object(N.jsxs)("h6",{children:[p,"  "]})]}),Object(N.jsx)("div",{children:Object(N.jsxs)("h6",{children:[" Categoria: ",f]})}),Object(N.jsxs)("li",{className:"card-text",children:["Palabras Claves:",O]})]})})]})}),Object(N.jsx)(D,{})]})})},F=function(e){var t=e.history,c=Object(a.useState)([]),n=Object(j.a)(c,2),s=n[0],r=n[1],i=function(){var e=Object(l.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.collection("books").orderBy("calificacion","desc").get();case 2:t=e.sent,c=[],t.forEach((function(e){c.push(Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id}))})),console.log(c),r(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){i()}),[]),Object(N.jsxs)("div",{children:[Object(N.jsx)("button",{className:"btn m-1 btn-block btn-outline-ligth",onClick:function(){t.length<=2?t.push("/"):t.goBack()},children:Object(N.jsx)("i",{className:"fas fa-chevron-circle-left"})}),Object(N.jsx)("h1",{children:"Calificaciones"}),Object(N.jsx)("hr",{}),Object(N.jsx)("p",{children:"Se muestran la lista de libros de mayor puntaje a menor:"}),Object(N.jsx)("div",{className:"card-columns animate__animated animate__zoomIn",children:s.map((function(e){return Object(N.jsx)(S,Object(u.a)({},e),e.id)}))})]})},U=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),c=t[0],n=t[1];Object(a.useEffect)((function(){s()}),[]);var s=function(){var e=Object(l.a)(o.a.mark((function e(){var t,c,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://commerce-app.herokuapp.com/api/libros/listalibros",e.next=3,fetch("https://commerce-app.herokuapp.com/api/libros/listalibros");case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,a=c.data,s=a.map((function(e){return{id:e.id,titulo:e.titulo,img:e.img,autor:e.autor,descripCorta:e.descripCorta,descripLarga:e.descripLarga,palabrasClaves:e.palabrasClaves,categoria:e.categoria,calificacion:e.calificacion}})),n(s);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=c.slice(0,4);return Object(N.jsx)("div",{className:"card-columns animate__animated animate__zoomIn",children:r.map((function(e){return Object(N.jsx)(S,Object(u.a)({},e),e.id)}))})},P=function(){return Object(N.jsx)("div",{children:Object(N.jsxs)("footer",{className:"social-footer",children:[Object(N.jsx)("div",{className:"social-footer-left",children:Object(N.jsx)("i",{className:"fas fa-book-open"})}),Object(N.jsx)("div",{className:"social-footer-icons",children:Object(N.jsxs)("ul",{className:"menu simple",children:[Object(N.jsx)("i",{className:"fab fa-facebook"}),Object(N.jsx)("i",{className:"fab fa-instagram"}),Object(N.jsx)("i",{className:"fab fa-pinterest"}),Object(N.jsx)("i",{className:"fab fa-twitter-square"})]})})]})})},q=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),c=t[0],n=t[1];Object(a.useEffect)((function(){s()}),[]);var s=function(){var e=Object(l.a)(o.a.mark((function e(){var t,c,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://commerce-app.herokuapp.com/api/carrusel/listaimg",e.next=3,fetch("https://commerce-app.herokuapp.com/api/carrusel/listaimg");case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,a=c.data,s=a.map((function(e){return{id:e.id,img:e.img}})),n(s);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)("div",{className:"simpleSlider",id:"slider",children:Object(N.jsx)("figure",{children:c.map((function(e){return Object(N.jsx)("img",{src:e.img,alt:"img"},e.id)}))})})})},T=function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{children:[" ",Object(N.jsx)(q,{})," "]}),Object(N.jsxs)("div",{children:[Object(N.jsx)("h1",{children:"Cat\xe1logo"}),Object(N.jsx)("hr",{}),Object(N.jsx)(U,{}),Object(N.jsx)(k.b,{className:"btn btn-light",to:"/catalogo",children:"Ver m\xe1s..."}),Object(N.jsx)("hr",{}),Object(N.jsx)("h1",{children:"Encuentranos:"}),Object(N.jsx)("hr",{}),Object(N.jsx)(P,{})]})]})},G=c(38),R=c.n(G),W=function(e){var t=e.history,c=Object(w.g)(),n=R.a.parse(c.search).q,s=void 0===n?"":n,r=L({searchText:s}),i=Object(j.a)(r,2),d=i[0],b=i[1],m=d.searchText,h=Object(a.useState)([]),p=Object(j.a)(h,2),O=p[0],f=p[1];Object(a.useEffect)((function(){x(m)}),[m]);var x=function(){var e=Object(l.a)(o.a.mark((function e(t){var c,a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="https://commerce-app.herokuapp.com/api/libros/libros/palabrasClaves/".concat(t),e.next=3,fetch(c);case 3:return a=e.sent,e.next=6,a.json();case 6:if(n=e.sent,void 0!==(s=n.data)){e.next=10;break}return e.abrupt("return",[]);case 10:console.log(s),f(s);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)("div",{children:[Object(N.jsx)("h1",{children:"Buscar"}),Object(N.jsx)("hr",{}),Object(N.jsxs)("div",{className:"row",children:[Object(N.jsx)("div",{children:Object(N.jsxs)("form",{className:"d-flex ",onSubmit:function(e){e.preventDefault(),t.push("?q=".concat(m))},children:[Object(N.jsx)("input",{type:"text",placeholder:"Encuentra tu Libro...",className:"form-control",name:"searchText",autoComplete:"off",value:m,onChange:b}),Object(N.jsx)("button",{type:"submit",className:"btn m-1 btn-block btn-outline-ligth",onClick:function(){return x(m)},children:Object(N.jsx)("i",{className:"fas fa-search"})})]})}),Object(N.jsxs)("div",{className:"results",children:[Object(N.jsx)("h4",{children:" Results "}),Object(N.jsx)("hr",{}),""!==s&&0===O.length&&Object(N.jsxs)("div",{className:"alert alert-danger",children:["No se encuentran Resultados con: ",s]}),O.map((function(e){return Object(N.jsx)(S,Object(u.a)({},e),e.id)}))]})]})]})},J=function(){var e=Object(r.b)();return Object(N.jsxs)("nav",{id:"navar",className:"navbar navbar-expand-sm navbar-dark bg-dark",children:[Object(N.jsx)(k.b,{className:"navbar-brand",to:"/",children:" Home"}),Object(N.jsx)("div",{className:"navbar-collapse",children:Object(N.jsxs)("div",{className:"navbar-nav",children:[Object(N.jsx)(k.c,{activeClassName:"active",className:"nav-item nav-link",exact:!0,to:"/catalogo",children:" Cat\xe1logo"}),Object(N.jsx)(k.c,{activeClassName:"active",className:"nav-item nav-link",exact:!0,to:"/calificaciones",children:"Calificaciones"}),Object(N.jsx)(k.c,{activeClassName:"active",className:"nav-item nav-link",exact:!0,to:"/search",children:"Buscar"})]})}),Object(N.jsx)("form",{className:"d-flex",children:Object(N.jsxs)(k.b,{className:"btn-logout",onClick:function(){e(function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.auth().signOut();case 2:t(v());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},type:"button",to:"/",children:[" ",Object(N.jsx)("i",{className:"fas fa-sign-out-alt fa-1x "})]})})]})},K=function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(J,{}),Object(N.jsx)("div",{className:"container",children:Object(N.jsxs)(w.d,{children:[Object(N.jsx)(w.b,{exact:!0,path:"/",component:T}),Object(N.jsx)(w.b,{exact:!0,path:"/catalogo",component:E}),Object(N.jsx)(w.b,{exact:!0,path:"/calificaciones",component:F}),Object(N.jsx)(w.b,{exact:!0,path:"/search",component:W}),Object(N.jsx)(w.b,{path:"/book/:id",component:z}),Object(N.jsx)(w.b,{exact:!0,path:"/login",component:C}),Object(N.jsx)(w.a,{to:"/"})]})})]})},V=function(){var e=Object(r.b)(),t=Object(a.useState)(!0),c=Object(j.a)(t,2),n=c[0],s=c[1],i=Object(a.useState)(!1),u=Object(j.a)(i,2),b=u[0],m=u[1];return Object(a.useEffect)((function(){d.a.auth().onAuthStateChanged(function(){var t=Object(l.a)(o.a.mark((function t(c){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===c||void 0===c?void 0:c.uid)?(e(x(c.uid,c.displayName)),m(!0)):m(!1),s(!1);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e,s,m]),n?Object(N.jsx)("div",{className:"text-center",children:Object(N.jsx)("div",{className:"spinner-border  m-5",role:"status",children:Object(N.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(N.jsx)(k.a,{children:Object(N.jsx)("div",{children:Object(N.jsxs)(w.d,{children:[Object(N.jsx)(w.b,{isAuthenticated:b,exact:!0,path:"/login",component:C}),Object(N.jsx)(w.b,{isAuthenticated:b,path:"/",component:K}),Object(N.jsx)(w.a,{to:"/"})]})})})},X=c(26),H=c(39),M="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||X.c,Q=Object(X.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return{uid:t.payload.uid,name:t.payload.displayName};case O:return{};default:return e}}}),Y=Object(X.d)(Q,M(Object(X.a)(H.a))),Z=function(){return Object(N.jsx)(r.a,{store:Y,children:Object(N.jsx)(V,{})})};s.a.render(Object(N.jsx)(Z,{}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.ffb93b8b.chunk.js.map